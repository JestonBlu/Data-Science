<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data Science Tasks</title>
  <meta name="description" content="Data Science and Statistical Analysis I want to remember">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Data Science Tasks" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://github.com/jestonblu/datascience" />
  
  <meta property="og:description" content="Data Science and Statistical Analysis I want to remember" />
  <meta name="github-repo" content="jestonblu/datascience" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Science Tasks" />
  
  <meta name="twitter:description" content="Data Science and Statistical Analysis I want to remember" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="random-forest.html">
<link rel="next" href="support-vector-machines.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science Tasks</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="statistical-methods.html"><a href="statistical-methods.html"><i class="fa fa-check"></i>Statistical Methods</a><ul>
<li class="chapter" data-level="" data-path="fitting-distributions.html"><a href="fitting-distributions.html"><i class="fa fa-check"></i>Fitting Distributions</a><ul>
<li class="chapter" data-level="" data-path="fitting-distributions.html"><a href="fitting-distributions.html#continuous-distributions"><i class="fa fa-check"></i>Continuous Distributions</a></li>
<li class="chapter" data-level="" data-path="fitting-distributions.html"><a href="fitting-distributions.html#discrete-distributions"><i class="fa fa-check"></i>Discrete Distributions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i>Hypothesis Testing</a></li>
<li class="chapter" data-level="" data-path="parameter-estimation.html"><a href="parameter-estimation.html"><i class="fa fa-check"></i>Parameter Estimation</a></li>
<li class="chapter" data-level="" data-path="sample-size-and-power.html"><a href="sample-size-and-power.html"><i class="fa fa-check"></i>Sample Size and Power</a><ul>
<li class="chapter" data-level="" data-path="sample-size-and-power.html"><a href="sample-size-and-power.html#proportions"><i class="fa fa-check"></i>Proportions</a></li>
<li class="chapter" data-level="" data-path="sample-size-and-power.html"><a href="sample-size-and-power.html#t-test"><i class="fa fa-check"></i>T-test</a></li>
<li class="chapter" data-level="" data-path="sample-size-and-power.html"><a href="sample-size-and-power.html#chi-square"><i class="fa fa-check"></i>Chi-square</a></li>
<li class="chapter" data-level="" data-path="sample-size-and-power.html"><a href="sample-size-and-power.html#anova"><i class="fa fa-check"></i>ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="survival-analysis.html"><a href="survival-analysis.html"><i class="fa fa-check"></i>Survival Analysis</a></li>
<li class="chapter" data-level="" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i>Experimental Design</a><ul>
<li class="chapter" data-level="" data-path="experimental-design.html"><a href="experimental-design.html#completely-random-design"><i class="fa fa-check"></i>Completely Random Design</a></li>
<li class="chapter" data-level="" data-path="experimental-design.html"><a href="experimental-design.html#random-complete-block-design"><i class="fa fa-check"></i>Random Complete Block Design</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="contingency-tables.html"><a href="contingency-tables.html"><i class="fa fa-check"></i>Contingency Tables</a></li>
<li class="chapter" data-level="" data-path="principal-components.html"><a href="principal-components.html"><i class="fa fa-check"></i>Principal Components</a></li>
<li class="chapter" data-level="" data-path="eigen-values-and-statistical-distance.html"><a href="eigen-values-and-statistical-distance.html"><i class="fa fa-check"></i>Eigen Values and Statistical Distance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regression-methods.html"><a href="regression-methods.html"><i class="fa fa-check"></i>Regression Methods</a><ul>
<li class="chapter" data-level="" data-path="matrix-regression.html"><a href="matrix-regression.html"><i class="fa fa-check"></i>Matrix Regression</a></li>
<li class="chapter" data-level="" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i>Logistic Regression</a></li>
<li class="chapter" data-level="" data-path="multinomial-logistic-regression.html"><a href="multinomial-logistic-regression.html"><i class="fa fa-check"></i>Multinomial Logistic Regression</a></li>
<li class="chapter" data-level="" data-path="poisson-regression.html"><a href="poisson-regression.html"><i class="fa fa-check"></i>Poisson Regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="clustering-methods.html"><a href="clustering-methods.html"><i class="fa fa-check"></i>Clustering Methods</a><ul>
<li class="chapter" data-level="" data-path="kmeans-clustering.html"><a href="kmeans-clustering.html"><i class="fa fa-check"></i>Kmeans Clustering</a></li>
<li class="chapter" data-level="" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html"><i class="fa fa-check"></i>Hierarchical Clustering</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="forecasting.html"><a href="forecasting.html"><i class="fa fa-check"></i>Forecasting</a><ul>
<li class="chapter" data-level="" data-path="basic-graphical-methods-for-time-series.html"><a href="basic-graphical-methods-for-time-series.html"><i class="fa fa-check"></i>Basic Graphical Methods for Time Series</a></li>
<li class="chapter" data-level="" data-path="generate-time-series-data.html"><a href="generate-time-series-data.html"><i class="fa fa-check"></i>Generate Time Series Data</a><ul>
<li class="chapter" data-level="0.0.1" data-path="generate-time-series-data.html"><a href="generate-time-series-data.html#manually-generated-series"><i class="fa fa-check"></i><b>0.0.1</b> Manually Generated Series</a></li>
<li class="chapter" data-level="" data-path="generate-time-series-data.html"><a href="generate-time-series-data.html#auto-generated-series"><i class="fa fa-check"></i>Auto Generated Series</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="arima-modeling.html"><a href="arima-modeling.html"><i class="fa fa-check"></i>ARIMA Modeling</a></li>
<li class="chapter" data-level="" data-path="var-modeling.html"><a href="var-modeling.html"><i class="fa fa-check"></i>VAR Modeling</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i>Machine Learning</a><ul>
<li class="chapter" data-level="" data-path="neural-network.html"><a href="neural-network.html"><i class="fa fa-check"></i>Neural Network</a></li>
<li class="chapter" data-level="" data-path="random-forest.html"><a href="random-forest.html"><i class="fa fa-check"></i>Random Forest</a></li>
<li class="chapter" data-level="" data-path="gradient-boosting.html"><a href="gradient-boosting.html"><i class="fa fa-check"></i>Gradient Boosting</a></li>
<li class="chapter" data-level="" data-path="support-vector-machines.html"><a href="support-vector-machines.html"><i class="fa fa-check"></i>Support Vector Machines</a></li>
<li class="chapter" data-level="" data-path="overfitting.html"><a href="overfitting.html"><i class="fa fa-check"></i>Overfitting</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i>Simulation</a><ul>
<li class="chapter" data-level="" data-path="bootstrap-simulation.html"><a href="bootstrap-simulation.html"><i class="fa fa-check"></i>Bootstrap Simulation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i>Visualization</a><ul>
<li class="chapter" data-level="" data-path="building-maps-with-choropleth-and-ggplot.html"><a href="building-maps-with-choropleth-and-ggplot.html"><i class="fa fa-check"></i>Building Maps with choropleth and ggplot</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Tasks</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gradient-boosting" class="section level2 unnumbered">
<h2>Gradient Boosting</h2>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" data-line-number="1">## required packages</a>
<a class="sourceLine" id="cb301-2" data-line-number="2"><span class="kw">library</span>(caret)</a>
<a class="sourceLine" id="cb301-3" data-line-number="3"><span class="kw">library</span>(gbm)</a>
<a class="sourceLine" id="cb301-4" data-line-number="4"></a>
<a class="sourceLine" id="cb301-5" data-line-number="5">## Training and Testing Data</a>
<a class="sourceLine" id="cb301-6" data-line-number="6">hof.train =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/HOF_tr.csv&quot;</span>);</a>
<a class="sourceLine" id="cb301-7" data-line-number="7">hof.test =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/HOF_te.csv&quot;</span>)</a>
<a class="sourceLine" id="cb301-8" data-line-number="8"></a>
<a class="sourceLine" id="cb301-9" data-line-number="9">hof =<span class="st"> </span><span class="kw">rbind</span>(hof.train, hof.test)</a>
<a class="sourceLine" id="cb301-10" data-line-number="10">hof<span class="op">$</span>HOF =<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">as.numeric</span>(hof<span class="op">$</span>HOF) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb301-11" data-line-number="11"></a>
<a class="sourceLine" id="cb301-12" data-line-number="12">## create a training and testing set by randomly sampling from all of the data</a>
<a class="sourceLine" id="cb301-13" data-line-number="13">## using the same set as in the random forest example</a>
<a class="sourceLine" id="cb301-14" data-line-number="14"><span class="kw">set.seed</span>(<span class="dv">1002</span>)</a>
<a class="sourceLine" id="cb301-15" data-line-number="15">x =<span class="st"> </span><span class="kw">sample</span>(<span class="kw">nrow</span>(hof), <span class="dt">replace =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb301-16" data-line-number="16"></a>
<a class="sourceLine" id="cb301-17" data-line-number="17">## remove unwanted columns</a>
<a class="sourceLine" id="cb301-18" data-line-number="18">hof =<span class="st"> </span>hof[, <span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>)]</a>
<a class="sourceLine" id="cb301-19" data-line-number="19"></a>
<a class="sourceLine" id="cb301-20" data-line-number="20">## lets train the model on about 90% of the data</a>
<a class="sourceLine" id="cb301-21" data-line-number="21">train =<span class="st"> </span>hof[x[<span class="dv">1</span><span class="op">:</span><span class="dv">900</span>], ]</a>
<a class="sourceLine" id="cb301-22" data-line-number="22">test =<span class="st"> </span>hof[<span class="op">-</span>x[<span class="dv">1</span><span class="op">:</span><span class="dv">900</span>], ]</a>
<a class="sourceLine" id="cb301-23" data-line-number="23"></a>
<a class="sourceLine" id="cb301-24" data-line-number="24"><span class="kw">head</span>(train)</a></code></pre></div>
<pre><code>    HOF POS  ASG    G   AB    R    H  DB TP  HR  RBI  SB  CS  BB   SO AVG
453   0  1B 0.44 2071 7030 1105 1921 295 48 370 1274  63  31 943 1137 273
803   0  SS 0.00  568 1104  142  260  43 10  37  109   7   5  94  220 236
621   0   C 0.00  476 1125   89  267  41  5  18  108   1   0  43  159 237
230   0  OF 0.12 1912 6787  926 1884 334 69 164  824 312 134 468 1266 278
379   0  OF 0.17 1457 4843  737 1399 212 60 142  661  89  68 644  591 289
720   0  OF 0.09 1221 3895  540 1020 175 37 112  485  45  30 351  574 262
    SLG OBP
453 487 359
803 393 304
621 331 268
230 420 325
379 445 371
720 412 323</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" data-line-number="1"><span class="kw">summary</span>(train)</a></code></pre></div>
<pre><code> HOF     POS           ASG               G                AB       
 0:861   1B: 96   Min.   :0.0000   Min.   : 140.0   Min.   :  252  
 1: 39   2B:105   1st Qu.:0.0000   1st Qu.: 937.5   1st Qu.: 2628  
         3B:100   Median :0.0000   Median :1286.0   Median : 4034  
         C :158   Mean   :0.1028   Mean   :1338.3   Mean   : 4335  
         OF:331   3rd Qu.:0.1500   3rd Qu.:1666.2   3rd Qu.: 5607  
         SS:110   Max.   :0.9500   Max.   :3308.0   Max.   :12364  
       R                H                DB              TP        
 Min.   :  20.0   Min.   :  48.0   Min.   :  6.0   Min.   :  0.00  
 1st Qu.: 308.5   1st Qu.: 660.2   1st Qu.:110.8   1st Qu.: 12.00  
 Median : 511.5   Median :1061.0   Median :180.0   Median : 24.00  
 Mean   : 574.8   Mean   :1159.5   Mean   :199.4   Mean   : 30.44  
 3rd Qu.: 756.0   3rd Qu.:1531.2   3rd Qu.:264.0   3rd Qu.: 41.00  
 Max.   :2295.0   Max.   :3771.0   Max.   :725.0   Max.   :177.00  
       HR              RBI               SB                CS        
 Min.   :  0.00   Min.   :  21.0   Min.   :   0.00   Min.   :  0.00  
 1st Qu.: 37.75   1st Qu.: 280.5   1st Qu.:  15.00   1st Qu.: 15.00  
 Median : 81.00   Median : 447.0   Median :  40.50   Median : 30.00  
 Mean   :115.15   Mean   : 540.9   Mean   :  84.33   Mean   : 41.81  
 3rd Qu.:155.00   3rd Qu.: 708.0   3rd Qu.: 101.25   3rd Qu.: 57.00  
 Max.   :755.00   Max.   :2297.0   Max.   :1406.00   Max.   :335.00  
       BB               SO              AVG             SLG       
 Min.   :  17.0   Min.   :  35.0   Min.   :161.0   Min.   :222.0  
 1st Qu.: 226.8   1st Qu.: 375.5   1st Qu.:248.0   1st Qu.:351.0  
 Median : 363.0   Median : 569.0   Median :262.0   Median :392.5  
 Mean   : 435.3   Mean   : 643.5   Mean   :261.3   Mean   :393.2  
 3rd Qu.: 567.0   3rd Qu.: 841.2   3rd Qu.:274.0   3rd Qu.:432.0  
 Max.   :2190.0   Max.   :2597.0   Max.   :338.0   Max.   :565.0  
      OBP       
 Min.   :203.0  
 1st Qu.:310.0  
 Median :327.0  
 Mean   :328.2  
 3rd Qu.:347.0  
 Max.   :417.0  </code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb305-1" data-line-number="1">## build model</a>
<a class="sourceLine" id="cb305-2" data-line-number="2">fitControl =<span class="st"> </span><span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;repeatedCV&quot;</span>, <span class="dt">number =</span> <span class="dv">5</span>, <span class="dt">repeats =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb305-3" data-line-number="3">mdl =<span class="st"> </span><span class="kw">train</span>(HOF <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> train, <span class="dt">method =</span> <span class="st">&quot;gbm&quot;</span>, <span class="dt">trControl =</span> fitControl,</a>
<a class="sourceLine" id="cb305-4" data-line-number="4">            <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb305-5" data-line-number="5"></a>
<a class="sourceLine" id="cb305-6" data-line-number="6">## Model Summary</a>
<a class="sourceLine" id="cb305-7" data-line-number="7">mdl; <span class="kw">plot</span>(mdl)</a></code></pre></div>
<pre><code>Stochastic Gradient Boosting 

900 samples
 17 predictor
  2 classes: &#39;0&#39;, &#39;1&#39; 

No pre-processing
Resampling: Cross-Validated (5 fold, repeated 5 times) 
Summary of sample sizes: 720, 720, 720, 719, 721, 720, ... 
Resampling results across tuning parameters:

  interaction.depth  n.trees  Accuracy   Kappa    
  1                   50      0.9842196  0.7910195
  1                  100      0.9839986  0.7934159
  1                  150      0.9835517  0.7899395
  2                   50      0.9859986  0.8179582
  2                  100      0.9846653  0.8038399
  2                  150      0.9840035  0.7949731
  3                   50      0.9833307  0.7767886
  3                  100      0.9824443  0.7725392
  3                  150      0.9831146  0.7844066

Tuning parameter &#39;shrinkage&#39; was held constant at a value of 0.1

Tuning parameter &#39;n.minobsinnode&#39; was held constant at a value of 10
Accuracy was used to select the optimal model using the largest value.
The final values used for the model were n.trees = 50, interaction.depth
 = 2, shrinkage = 0.1 and n.minobsinnode = 10.</code></pre>
<p><img src="05-03-ML-Gradient-Boosting_files/figure-html/d1-1.png" width="864" /></p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb307-1" data-line-number="1">x =<span class="st"> </span><span class="kw">predict</span>(mdl, test, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>)</a>
<a class="sourceLine" id="cb307-2" data-line-number="2"></a>
<a class="sourceLine" id="cb307-3" data-line-number="3">## compile results</a>
<a class="sourceLine" id="cb307-4" data-line-number="4">results =<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb307-5" data-line-number="5">  <span class="dt">Actual =</span> test<span class="op">$</span>HOF,</a>
<a class="sourceLine" id="cb307-6" data-line-number="6">  <span class="dt">Prob.N =</span> x[, <span class="dv">1</span>],</a>
<a class="sourceLine" id="cb307-7" data-line-number="7">  <span class="dt">Prob.Y =</span> x[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb307-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb307-9" data-line-number="9"></a>
<a class="sourceLine" id="cb307-10" data-line-number="10">## code 0/1 back to N/Y</a>
<a class="sourceLine" id="cb307-11" data-line-number="11">results<span class="op">$</span>Actual =<span class="st"> </span><span class="kw">as.character</span>(results<span class="op">$</span>Actual)</a>
<a class="sourceLine" id="cb307-12" data-line-number="12">results<span class="op">$</span>Actual[results<span class="op">$</span>Actual <span class="op">==</span><span class="st"> &#39;0&#39;</span>] =<span class="st"> &#39;N&#39;</span></a>
<a class="sourceLine" id="cb307-13" data-line-number="13">results<span class="op">$</span>Actual[results<span class="op">$</span>Actual <span class="op">==</span><span class="st"> &#39;1&#39;</span>] =<span class="st"> &#39;Y&#39;</span></a>
<a class="sourceLine" id="cb307-14" data-line-number="14">results<span class="op">$</span>Actual =<span class="st"> </span><span class="kw">factor</span>(results<span class="op">$</span>Actual)</a>
<a class="sourceLine" id="cb307-15" data-line-number="15"></a>
<a class="sourceLine" id="cb307-16" data-line-number="16">## if probability of HOF is &gt; .5 then score a Y</a>
<a class="sourceLine" id="cb307-17" data-line-number="17">results<span class="op">$</span>Prediction =<span class="st"> &quot;N&quot;</span></a>
<a class="sourceLine" id="cb307-18" data-line-number="18">results<span class="op">$</span>Prediction[results<span class="op">$</span>Prob.Y <span class="op">&gt;=</span><span class="st"> </span><span class="fl">.5</span>] =<span class="st"> &quot;Y&quot;</span></a>
<a class="sourceLine" id="cb307-19" data-line-number="19">results<span class="op">$</span>Prediction =<span class="st"> </span><span class="kw">factor</span>(results<span class="op">$</span>Prediction)</a>
<a class="sourceLine" id="cb307-20" data-line-number="20"></a>
<a class="sourceLine" id="cb307-21" data-line-number="21">## accuracy calculation from the random forest example</a>
<a class="sourceLine" id="cb307-22" data-line-number="22">metric =<span class="st"> </span><span class="cf">function</span>(confusion) {</a>
<a class="sourceLine" id="cb307-23" data-line-number="23">  sensitivity =<span class="st"> </span>confusion[<span class="dv">4</span>] <span class="op">/</span><span class="st"> </span>(confusion[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>confusion[<span class="dv">4</span>])</a>
<a class="sourceLine" id="cb307-24" data-line-number="24">  specificity =<span class="st"> </span>confusion[<span class="dv">1</span>] <span class="op">/</span><span class="st"> </span>(confusion[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>confusion[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb307-25" data-line-number="25">  score =<span class="st"> </span>(sensitivity <span class="op">+</span><span class="st"> </span>(<span class="dv">3</span> <span class="op">*</span><span class="st"> </span>specificity)) <span class="op">/</span><span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb307-26" data-line-number="26">  <span class="kw">return</span>(score)</a>
<a class="sourceLine" id="cb307-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb307-28" data-line-number="28"></a>
<a class="sourceLine" id="cb307-29" data-line-number="29">## confusion matrix and accuracy score</a>
<a class="sourceLine" id="cb307-30" data-line-number="30">(<span class="dt">confusion =</span> <span class="kw">table</span>(<span class="dt">Prediction =</span> results<span class="op">$</span>Prediction, <span class="dt">Actual =</span> results<span class="op">$</span>Actual))</a></code></pre></div>
<pre><code>          Actual
Prediction   N   Y
         N 106   2
         Y   0   8</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1">## accuracy score for training set</a>
<a class="sourceLine" id="cb309-2" data-line-number="2"><span class="kw">metric</span>(confusion)</a></code></pre></div>
<pre><code>[1] 0.9861111</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1">## look at the incorrect responses and see if we can lower the threshold with creating</a>
<a class="sourceLine" id="cb311-2" data-line-number="2">## false positives</a>
<a class="sourceLine" id="cb311-3" data-line-number="3"><span class="kw">summary</span>(results); <span class="kw">subset</span>(results, Actual <span class="op">!=</span><span class="st"> </span>Prediction)</a></code></pre></div>
<pre><code> Actual      Prob.N             Prob.Y         Prediction
 N:106   Min.   :0.001712   Min.   :0.001282   N:108     
 Y: 10   1st Qu.:0.998683   1st Qu.:0.001317   Y:  8     
         Median :0.998683   Median :0.001317             
         Mean   :0.935894   Mean   :0.064106             
         3rd Qu.:0.998683   3rd Qu.:0.001317             
         Max.   :0.998718   Max.   :0.998288             </code></pre>
<pre><code>   Actual    Prob.N     Prob.Y Prediction
1       Y 0.9691392 0.03086077          N
78      Y 0.7711650 0.22883501          N</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" data-line-number="1">min.pred =<span class="st"> </span><span class="kw">min</span>(<span class="kw">subset</span>(results, Actual <span class="op">!=</span><span class="st"> </span>Prediction, <span class="st">&quot;Prob.Y&quot;</span>))</a>
<a class="sourceLine" id="cb314-2" data-line-number="2"></a>
<a class="sourceLine" id="cb314-3" data-line-number="3">## it looks like there is no danger of lowering the threshold</a>
<a class="sourceLine" id="cb314-4" data-line-number="4">results<span class="op">$</span>Prediction.new =<span class="st"> &quot;N&quot;</span></a>
<a class="sourceLine" id="cb314-5" data-line-number="5">results<span class="op">$</span>Prediction.new[results<span class="op">$</span>Prob.Y <span class="op">&gt;=</span><span class="st"> </span>min.pred] =<span class="st"> &quot;Y&quot;</span></a>
<a class="sourceLine" id="cb314-6" data-line-number="6"></a>
<a class="sourceLine" id="cb314-7" data-line-number="7">## confusion matrix and accuracy score</a>
<a class="sourceLine" id="cb314-8" data-line-number="8">(<span class="dt">confusion =</span> <span class="kw">table</span>(<span class="dt">Prediction =</span> results<span class="op">$</span>Prediction.new, <span class="dt">Actual =</span> results<span class="op">$</span>Actual))</a></code></pre></div>
<pre><code>          Actual
Prediction   N   Y
         N 102   0
         Y   4  10</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" data-line-number="1">## accuracy score for training set</a>
<a class="sourceLine" id="cb316-2" data-line-number="2"><span class="kw">metric</span>(confusion)</a></code></pre></div>
<pre><code>[1] 0.9285714</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb318-1" data-line-number="1">## there are fewer incorrect answers, but the penalty for false positives are greater</a>
<a class="sourceLine" id="cb318-2" data-line-number="2">## than false negatives so the accuracy score is actually lower</a></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="random-forest.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="support-vector-machines.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
